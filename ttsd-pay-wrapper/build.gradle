apply plugin: 'war'

dependencies {
    compile fileTree(dir: 'libs', include: '**/*.jar'),
            project(':ttsd-service'),
            project(':ttsd-point-service'),
            project(':ttsd-log-service'),
            project(':ttsd-edxactivity-repository'),
            project(':ttsd-membership')

    compile 'com.github.spullara.mustache.java:compiler:0.9.5'
    compile 'javax.mail:mail:1.4.7'

    providedCompile "javax.servlet:javax.servlet-api:3.1.0"

    testCompile project(path: ':ttsd-user-repository', configuration: 'tests')
}

war {
    archiveName "ttsd-pay-wrapper.war"
    destinationDir = file("war")

    from("${configPath}/ttsd-pay-wrapper/SignVerProp.properties") {
        into 'WEB-INF/classes/'
    }
}

task renameWar {
    doLast {
        file("${project.projectDir.getPath()}/war/ttsd-pay-wrapper.war").renameTo(file("${project.projectDir.getPath()}/war/ROOT.war"))
    }
}