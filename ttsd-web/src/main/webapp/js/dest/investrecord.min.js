require(["jquery","mustache","text","daterangepicker","moment"],function(a,b,c){function d(d){var e=a("#daterangepicker").val().split("~"),i=a.trim(e[0]),j=a.trim(e[1]),k=a(".query-type").find(".current").attr("data-value"),l="";if(k&&(l="&loanStatus="+k),""==i||"undefined"==i)var m=API_AJAX+"?pageIndex="+d+l;else var m=API_AJAX+"?beginTime="+i+"&endTime="+j+"&pageIndex="+d+l;a.get(m,function(d){if("success"===d.status){a(".query-type strong").css("display","none");var e=b.render(c,d.data);a(".result").html(e),f=d.data.currentPage,g=d.data.hasNextPage,h=d.data.hasPreviousPage,console.log("分页"+f)}})}function e(){var b=j,c=k,e=l,f=a(".start-end span.current").attr("day");console.log(f),f?(l>f?1==parseInt(f)?(c=k+1,e=l):e=l-f:f==l?e=1:180==f?k+1>6?c=parseInt(k)-5:(c=12+k-5,b=j-1):30==f?k+1==2?(c=12,b=j-1):c=k:(k+1==2?(c=12,b=j-1):(c=k,b=j),f=f||0,l=l||0,e=30+l-f),a("#daterangepicker").val(b+"-"+c+"-"+e+"~"+(j+"-"+parseInt(k+1)+"-"+l))):a("#daterangepicker").val(""),d(1)}var f,g,h,i=new Date,j=i.getFullYear(),k=i.getMonth(),l=i.getDate();a("#daterangepicker").dateRangePicker({separator:" ~ "}).val(j+"-"+k+"-"+l+"~"+(j+"-"+parseInt(k+1)+"-"+l)),d(1),a(".start-end .jq-n").click(function(){a(this).addClass("current").siblings(".jq-n").removeClass("current"),e()}),a(".query-type .jq-n").click(function(){a(this).addClass("current").siblings(".jq-n").removeClass("current"),d(1)}),a(".apply-btn").click(function(){d(1)})});