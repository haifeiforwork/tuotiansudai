define([],function(){function a(a,b,c){this.minRange=Number(b),this.count=c,this.bigbox=document.getElementById(a),this.ready_moved=!0,this.imglist=this.bigbox.getElementsByTagName("ul")[0].children}return a.prototype={boxul:null,imglist:null,numlist:null,prev:0,index:0,timer:null,play:null,$:function(a){return"string"==typeof a?a.indexOf("#")>=0?(a=a.replace("#",""),document.getElementById(a)?document.getElementById(a):(alert("没有容器"+a),null)):document.createElement(a):a},info:function(){for(var a=this.$("ul"),b=1;b<=this.count;b++){var c=this.$("li");a.appendChild(c)}this.bigbox.appendChild(a),this.boxul=this.bigbox.getElementsByTagName("ul"),this.boxul[1].className="countNum",this.numlist=this.boxul[1].getElementsByTagName("li");for(var b=0;b<this.count;b++)this.alpha(b,0);this.alpha(0,100),this.numlist[0].className="current",this.action()},action:function(){this.autoplay(),this.mouseoverout(),this.bindTouchEvn()},fadeIn:function(a){a.classList.add("fadeIn")},fadeOut:function(a){Array.prototype.forEach.call(a,function(a){a.className=""})},imgshow:function(){clearInterval(this.timer);for(var a=100,b=0,c=0;c<this.numlist.length;c++)this.numlist[c].className="";this.numlist[this.index].className="current";for(var d=0;d<this.count;d++)this.alpha(d,0);this.alpha(this.prev,100),this.alpha(this.index,0),this.timer=setInterval(function(){b+=2,a-=2,b>100&&(b=100),a<0&&(a=100),this.alpha(this.prev,a),this.alpha(this.index,b),100==b&&0==a&&clearInterval(this.timer)}.bind(this),20)},alpha:function(a,b){this.imglist[a].style.opacity=b/100,this.imglist[a].style.filter="alpha(opacity="+b+")"},autoplay:function(){this.play=setInterval(function(){this.prev=this.index,this.index++,this.index>this.count-1&&(this.index=0),this.imgshow()}.bind(this),5e3)},mouseoverout:function(){var a=this;a.bigbox.onmouseover=function(b){clearInterval(a.play)},a.bigbox.onmouseout=function(){a.autoplay(a.index)};for(var b=0,c=a.numlist.length;b<c;b++)!function(b){a.numlist[b].index=b,a.numlist[b].onmouseover=function(b){clearInterval(a.play),b.stopPropagation();var c=b?b:window.event;window.event?c.cancelBubble=!0:c.stopPropagation(),a.index=b.target.index,a.imgshow()}}(b)},bindTouchEvn:function(){this.boxul[0].addEventListener("touchstart",this.touchstart.bind(this),!1),this.boxul[0].addEventListener("touchmove",this.touchmove.bind(this),!1),this.boxul[0].addEventListener("touchend",this.touchend.bind(this),!1)},touchstart:function(a){if(this.ready_moved){var b=a.touches[0];this.touchX=b.pageX,this.ready_moved=!1,clearInterval(this.play)}},touchmove:function(a){a.preventDefault();var b=this.minRange,c=this.touchX,d=this.count;if(!this.ready_moved){var e=a.changedTouches[0],f=e.pageX;f+b<c?(this.ready_moved=!0,this.index>=d-1?this.index=0:this.index++,this.imgshow(this.index)):f-b>c&&(this.index<=0&&(this.index=d+1),this.index--,this.imgshow(this.index),this.ready_moved=!0)}},touchend:function(a){a.preventDefault();var b=this.minRange,c=this.touchX,d=this.count;if(!this.ready_moved){var e=a.changedTouches[0],f=e.pageX;f+b<c?(this.ready_moved=!0,this.index>d-1?this.index=0:this.index++,this.imgshow(this.index)):f-b>c&&(this.index<=1&&(this.index=d+1),this.index--,this.imgshow(this.index),this.ready_moved=!0)}this.autoplay(this.index)}},a});