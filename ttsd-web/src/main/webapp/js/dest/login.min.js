require(["jquery"],function(a){a(function(){var b=a(".error");a(".login .img-captcha img").click(function(b){var c=a(b.target);c.attr("src","/login/captcha?"+(new Date).toTimeString())}),a(".login-name").blur(function(){var d="用户名不能为空",e=a(this);""==e.val().trim()?(e.removeClass("lock").addClass("unlock"),b.addClass("wrong").text(d)):(e.removeClass("unlock").addClass("lock"),b.removeClass("wrong").text("")),c()}),a(".password").blur(function(){var d="密码不能为空",e=a(this);""==e.val()?(e.removeClass("lock").addClass("unlock"),b.addClass("wrong").text(d)):(e.addClass("lock").removeClass("unlock"),b.removeClass("wrong").text("")),c()}),a(".captcha").blur(function(){var d=a(this),e="验证码错误",f=d.val();f.length<5?(d.addClass("lock").removeClass("unlock"),b.addClass("wrong").text(e),c()):a.ajax({url:"/login/captcha/"+f+"/verify",type:"get",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(b){if(b.data.status)d.addClass("lock").removeClass("unlock"),a(".error").removeClass("wrong").text("");else{a(".error").addClass("wrong").text(e),d.removeClass("lock").addClass("unlock");var f=a(".login .img-captcha img");f.attr("src","/login/captcha?"+(new Date).toTimeString())}c()})});var c=function(){console.log("in");for(var b=a(".form-login"),c=0;3>c;c++){if(b.find("label").eq(c).find("input").hasClass("unlock"))return a(".login-now").addClass("grey").attr("disabled","disabled"),!1;a(".login-now").removeClass("grey").removeAttr("disabled")}};a(".login-now").click(function(){var b=a(".form-login").serialize();a.ajax({url:url,type:"POST",dataType:"json",data:b}).done(function(b){b.status||(a(".captcha").addClass("unlock").removeClass("lock").val(""),a(".error").addClass("wrong").text("用户名或密码错误")),console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})})});