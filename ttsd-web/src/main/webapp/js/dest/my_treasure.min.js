require(["jquery","coupon-alert"],function(a){a(function(){var b=a("body"),c=a("#ruleList"),d=a(".model-list");b.on("click",".filters-list li",function(b){b.preventDefault();var c=a(this),e=c.index();c.addClass("active").siblings().removeClass("active"),d.find(".coupon-com:eq("+e+")").show().siblings().hide()}).on("click",".close-btn",function(a){a.preventDefault(),c.fadeOut("fast")}).on("click",".rule-show",function(a){a.preventDefault(),c.fadeIn("fast")}),a("#submitCode").on("click",function(){var b=a("#couponByCode").val().trim;0==b.length?(a(this).parent().append('<p class="tip-text error-color">请输入正确的兑换码</p>'),a("#couponByCode").val("")):a.ajax({url:"/my-treasure/"+b+"/exchange",type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(b){var c=b.message;b.status?(a(this).parent().append('<p class="tip-text success-color">'+c+"</p>"),setInterval(function(){location.href="/my-treasure"},1e3)):(a(this).parent().append('<p class="tip-text error-color">'+c+"</p>"),a("#couponByCode").val(""))}).fail(function(){a(this).parent().append('<p class="tip-text error-color">兑换失败，请重试</p>'),a("#couponByCode").val("")})})})});