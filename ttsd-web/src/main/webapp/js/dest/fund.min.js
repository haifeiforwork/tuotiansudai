require(["jquery","mustache","text!/tpl/fundtable.tpl","moment","daterangepicker"],function(a,b,c,d){function e(d){var e=a("#daterangepicker").val().split("~"),f=a.trim(e[0]),h=a.trim(e[1]),i=a(".query-type").find(".current").attr("data-value"),j=a(".query-type").find(".current").attr("data-status"),k=a(".query-type").find(".current").attr("data-type"),l="";if(l=i?j?"&status="+i+"&status="+j:k?"&status="+i+"&status="+j+"&status="+k:"&status="+i:"&status=",""==f||"undefined"==f)var m=_API_FUND+"?index="+d+"&pageSize=10"+l;else var m=_API_FUND+"?startTime="+f+"&endTime="+h+"&index="+d+"&pageSize=10"+l;a.ajax({url:m,type:"get",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(d){a("#jq-pay").text(d.balance),a("#jq-recharge").text(d.sumRecharge),a("#jq-withdraw").text(d.sumWithdraw);var e=b.render(c,d);a("#tpl").html(e),g=d.index})}function f(){var b=a(".start-end span.current").attr("day");b?1==b?a("#daterangepicker").val(h+"~"+h):7==b?a("#daterangepicker").val(i+"~"+h):30==b?a("#daterangepicker").val(j+"~"+h):a("#daterangepicker").val(k+"~"+h):a("#daterangepicker").val(""),e(1)}var g,h=d().format("YYYY-MM-DD"),i=d().subtract(1,"week").format("YYYY-MM-DD"),j=d().subtract(1,"month").format("YYYY-MM-DD"),k=d().subtract(6,"month").format("YYYY-MM-DD");a("#daterangepicker").dateRangePicker({separator:" ~ "}).val(h+"~"+h),e(1),a(".start-end .jq-n").click(function(){a(this).addClass("current").siblings(".jq-n").removeClass("current"),f()}),a(".query-type .jq-n").click(function(){a(this).addClass("current").siblings(".jq-n").removeClass("current"),e(1)}),a(".apply-btn").click(function(){e(1)}),a(document).on("click",".pagination .nextPage",function(){g++,e(g)}),a(document).on("click",".pagination .prevPage",function(){g--,e(g)})});