require(["jquery","echarts","commonFun","jquery.ajax.extension","layerWrapper"],function(a){a(function(){function b(b,c,d){a(b).on("mouseenter",c,function(){layer.closeAll("tips"),a(this).text().length>d&&layer.tips(a(this).text(),a(this),{tips:[1,"#efbf5c"],time:2e3,tipsMore:!0,area:"auto",maxWidth:"500"})})}function c(){a.ajax({url:"/point/myavailablepoint",type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8",success:function(b){a("#MyAvailablePoint").text(b)}})}var d=a("#tMonthBox"),e=a("#signBtn"),f=a("#signLayer"),g=a("#closeSign"),h=a("ul",d);h.find("li").last().addClass("current"),a("table",d).eq(1).show().siblings("table").hide(),h.find("li").click(function(b){var c=a(this),e=h.find("li").index(this);c.addClass("current").siblings("li").removeClass("current"),a("table",d).eq(e).show().siblings("table").hide()});var i=[{name:"可用金额",value:pydata.balance},{name:"待收本金",value:pydata.collectingPrincipal},{name:"待收利息",value:pydata.collectingInterest}],j=MyChartsObject.ChartOptionTemplates.Pie(i,"YTTTTT"),k=a("#ReportShow")[0],l=MyChartsObject.ChartConfig(k,j);MyChartsObject.Charts.RenderChart(l),b("#tMonthBox",".month-title",6),b(".newProjects",".trade-detail",15),c(),a(".birth-icon").on("mouseenter",function(){layer.closeAll("tips");var b=parseFloat(a(this).attr("data-benefit")),c=b+1;layer.tips("您已享受生日福利，首月收益翻"+c+"倍",a(this),{tips:[1,"#efbf5c"],time:2e3,tipsMore:!0,area:"auto",maxWidth:"500"})}),e.on("click",function(b){b.preventDefault();var c=a(this),d=a(".sign-text");return tomorrowText=a(".tomorrow-text"),$addDou=a(".add-dou"),c.hasClass("active")?!1:void a.ajax({url:c.data("url"),type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(b){b.data.status&&(d.html("签到成功，领取"+b.data.signInPoint+"财豆！"),tomorrowText.html("明日可领"+b.data.nextSignInPoint+"财豆"),$addDou.html("+"+b.data.signInPoint),f.fadeIn("fast",function(){a(this).find(".add-dou").animate({bottom:"50px",opacity:"0"},800)}),c.removeClass("will-sign").addClass("finish-sign").html("已签到"),c.addClass("active"),c.parent(".sign-top").addClass("no-click"))})}),g.on("click",function(b){b.preventDefault(),f.fadeOut("fast",function(){a(this).find(".add-dou").css({bottom:"0",opacity:"1"})}),c()})})});