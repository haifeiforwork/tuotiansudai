require(["jquery","load_echarts","layerWrapper","template","jquery.ajax.extension"],function(a,b,c,d){a(function(){function e(b,d,e){a(b).on("mouseenter",d,function(){c.closeAll("tips"),a(this).text().length>e&&c.tips(a(this).text(),a(this),{tips:[1,"#efbf5c"],time:2e3,tipsMore:!0,area:"auto",maxWidth:"500"})})}var f=a("#tMonthBox"),g=a("#signBtn"),h=a("#signLayer"),i=a("#closeSign"),j=a("ul",f);j.find("li").last().addClass("current"),a("table",f).eq(1).show().siblings("table").hide(),j.find("li").click(function(b){var c=a(this),d=j.find("li").index(this);c.addClass("current").siblings("li").removeClass("current"),a("table",f).eq(d).show().siblings("table").hide()}),function(a){var b=[{name:"可用金额",value:pydata.balance},{name:"待收投资本金",value:pydata.collectingPrincipal},{name:"待收预期收益",value:pydata.collectingInterest}],c=a.optionCategory.PieOption(b),d=a.ChartConfig("ReportShow",c);a.RenderChart(d)}(b),e("#tMonthBox",".month-title",6),e(".newProjects",".trade-detail",15),a(".birth-icon").on("mouseenter",function(){c.closeAll("tips");var b=parseFloat(a(this).attr("data-benefit")),d=b+1;c.tips("您已享受生日福利，首月收益翻"+d+"倍",a(this),{tips:[1,"#efbf5c"],time:2e3,tipsMore:!0,area:"auto",maxWidth:"500"})}),g.on("click",function(b){b.preventDefault();var e=a(this),f=a(".sign-text"),g=a(".tomorrow-text"),i=a(".sign-point"),j=a(".intro-text"),k=a(".next-text"),l=a("#signBtn");a.ajax({url:e.attr("data-url"),type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(b){b.data.status?(1==b.data.signIn?f.html("您今天已签到"):f.html("签到成功"),g.html("明日签到可获得"+b.data.nextSignInPoint+"积分"),1==b.data.full?(j.html("已连续签到365天，获得全勤奖！"),k.html("365元现金红包")):(j.html(b.data.currentRewardDesc),k.html(b.data.nextRewardDesc)),l.parent().addClass("no-click").find("span").removeClass("will-sign").addClass("finish-sign").html("已签到"),i.find("span").html("+"+b.data.signInPoint),h.fadeIn("fast"),a("#MyAvailablePoint").text(Math.round(a("#MyAvailablePoint").text())+Math.round(b.data.signInPoint))):(a("#errorTip").html(d("errorTipTpl",b.data)),c.open({type:1,title:!1,area:["300px","180px"],content:a("#errorTip")}))})}),i.on("click",function(b){b.preventDefault(),h.fadeOut("fast",function(){a(this).find(".add-dou").css({bottom:"0",opacity:"1"})})})})});