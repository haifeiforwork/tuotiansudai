require(["jquery","underscore","moment","daterangepicker"],function(a,b,c){a(function(){if(!a("#instructions").length)return!1;a("#instructions").find(".item").on("mouseover",function(){var b=a(this);b.addClass("active").siblings().removeClass("active")});var d=a("#date-time-picker").dateRangePicker({separator:" ~ "}).on("datepicker-change",function(a,b){g({startTime:c(b.date1).format("YYYY-MM-DD"),endTime:c(b.date2).format("YYYY-MM-DD")})}),e=a("#tpl").html(),f=a("#tbody"),g=function(c,d){a.ajax({url:"/membership/structure-list-data",data:c||""}).done(function(a){f.html(b.template(e)({data:a})),d&&d()}).fail(function(a){console.error(a,"获取数据失败!")})};g(),a("#filter-btns").find("span").on("click",function(){var b=a(this),e=b.data("type");if(d.clear(),"all"==e)g(null,function(){b.addClass("active").siblings().removeClass("active")});else{var f=c();g({endTime:f.format("YYYY-MM-DD"),startTime:f.subtract(parseInt(e),"days").format("YYYY-MM-DD")},function(){b.addClass("active").siblings().removeClass("active")})}})})});