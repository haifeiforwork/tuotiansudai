require(["jquery","pagination","layerWrapper","coupon-alert","red-envelope-float","jquery.ajax.extension"],function(a,b,c){a(function(){function b(a){c.msg(a)}var d=a(".errorTip");d.length>0&&""!=d.text()&&b(d.text()),a("#transferSubmit").on("click",function(b){b.preventDefault();var d=parseInt(a("#transferInvestId").val()),e=a("#amount").val(),f=a("#userBalance").val(),g=a(".transfer-detail-content");a.ajax({url:"/transfer/"+d+"/purchase-check",type:"GET",dataType:"json"}).done(function(b){if("SUCCESS"==b.message)c.open({title:"温馨提示",btn:["确定"],content:"该项目已被承接，请选择其他项目。",btn1:function(a,b){c.closeAll(),location.href="/transfer-list"}});else if("CANCEL"==b.message)c.open({title:"温馨提示",btn:["确定"],content:"该项目已被取消，请选择其他项目。",btn1:function(a,b){c.closeAll(),location.href="/transfer-list"}});else{var d=a("#transferForm");if("/transfer/purchase"===d.attr("action")){var h="INVESTOR"===g.data("user-role");if(!h)return location.href="/login?redirect="+encodeURIComponent(location.href),!1;var i=parseInt((100*f).toFixed(0))||0;if(parseInt((100*e).toFixed(0))>i)return location.href="/recharge",!1}d.submit()}}).fail(function(){c.msg("请求失败")})})})});