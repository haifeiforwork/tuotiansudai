require(["jquery","pagination","mustache","text!/tpl/loan-invest-list.mustache","csrf","autoNumeric"],function(a,b,c,d){a(function(){function b(b){window.setInterval(function(){var c=0,d=0,e=0,f=0;1800>=b&&(b>0?(e=Math.floor(b/60)-24*c*60-60*d,f=Math.floor(b)-24*c*60*60-60*d*60-60*e):(h.prop("disabled",!1),h.html("马上投资")),9>=e&&(e="0"+e),9>=f&&(f="0"+f),a("#minute_show").html("<s></s>"+e+"分"),a("#second_show").html("<s></s>"+f+"秒"),b--)},1e3)}var e=a(".loan-detail-content"),f=a(".text-input-amount"),g=a(".account-info"),h=a(".btn-pay",g),i=a(".error",g),j=a(".loan-nav li"),k=a(".loan-list",e),l=a(".pagination");f.autoNumeric("init");var m=function(b){var e={index:b||1};l.loadPagination(e,function(b){if(b.status){var e=c.render(d,b);a(".loan-list-con table").html(e)}})};java_point<=50?(a(".chart-box .rount").css("webkitTransform","rotate("+3.6*java_point+"deg)"),a(".chart-box .rount2").hide()):(a(".chart-box .rount").css("webkitTransform","rotate(180deg)"),a(".chart-box .rount2").show(),a(".chart-box .rount2").css("webkitTransform","rotate("+3.6*(java_point-50)+"deg)")),k.find(".loan-list-con").eq(0).show(),j.click(function(){var b=a(this);b.addClass("active").siblings("li").removeClass("active");var c=b.index();1===c&&m(),k.find(".loan-list-con").eq(c).show().siblings(".loan-list-con").hide()}),a(".img-list li").click(function(){var b=a(this).find("img").attr("src");return a(".content img").attr("src",b),!1}),"PREHEAT"==a("#loanStatus").val()&&b(intDiff),h.click(function(){var b=Number(a('form input[name="amount"]').val()),c=Number(a("form .account-amount").text());return b>c?(location.href="/recharge",!1):!0}),f.blur(function(){var b=a(".hid-loan").val(),c=a(this).val(),d=a("form .amountNeedRaised-i").text();return c>d?(i.html("<i class='fa fa-times-circle'></i>输入金额不能大于可投金额!").removeAttr("style"),void h.prop("disabled",!0)):void a.ajax({url:"/calculate-expected-interest/loan/"+b+"/amount/"+c,type:"get",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(b){i.hide(),a(".expected-interest").html(b),h.prop("disabled",!1)})})})});