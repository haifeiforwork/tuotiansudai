require(["jquery","jqueryPage","csrf","autoNumeric"],function(a){a(function(){function b(b){a.get(b,function(b){if(b.status){for(var c=b.recordDtoList,d="",e=0;e<c.length;e++){var f="";c[e].autoInvest?(f+="自动",f+="WEB"==c[e].source?'<span class="icon-loan-ie"></span>':"IOS"==c[e].source?'<span class="icon-loan-ios"></span>':'<span class="icon-loan-Android"></span>'):(f+="手动",f+="WEB"==c[e].source?'<span class="icon-loan-ie"></span>':"IOS"==c[e].source?'<span class="icon-loan-ios"></span>':'<span class="icon-loan-Android"></span>'),d+="<tr><td>"+c[e].serialNo+"</td><td>"+c[e].loginName+"</td><td>"+c[e].amount+"</td><td>"+f+"</td><td>"+c[e].expectedRate+"</td><td>"+c[e].createdTime+"</td></tr>"}a(".table-list tbody").find("tr").remove(),a(".table-list tbody").append(d)}})}function c(b){window.setInterval(function(){var c=0,d=0,e=0,f=0;1800>=b&&(b>0?(e=Math.floor(b/60)-24*c*60-60*d,f=Math.floor(b)-24*c*60*60-60*d*60-60*e):a(".btn-pay").removeClass("grey").removeAttr("disabled").html("马上投资"),9>=e&&(e="0"+e),9>=f&&(f="0"+f),a("#minute_show").html("<s></s>"+e+"分"),a("#second_show").html("<s></s>"+f+"秒"),b--)},1e3)}var d=a(".text-input-amount");d.autoNumeric("init");var e=10,f=a(".jq-loan-user").val();a(".pagination").createPage({pageCount:pageTotal,current:1,backFn:function(a){var c="/loan/"+f+"/index/"+a+"/pagesize/"+e;b(c)}}),java_point<=50?(a(".chart-box .rount").css("webkitTransform","rotate("+3.6*java_point+"deg)"),a(".chart-box .rount2").hide()):(a(".chart-box .rount").css("webkitTransform","rotate(180deg)"),a(".chart-box .rount2").show(),a(".chart-box .rount2").css("webkitTransform","rotate("+3.6*(java_point-50)+"deg)"));var g=a(".nav li");g.click(function(){var b=a(this).index();a(this).addClass("current").siblings().removeClass("current"),a(".loan-list .loan-list-con").eq(b).show().siblings().hide()}),a(".img-list li").click(function(){var b=a(this).find("img").attr("src");return a(".content img").attr("src",b),a(".layer-box").show(),!1}),a(".layer-wrapper").click(function(){a(".layer-box").hide()}),a(function(){"PREHEAT"==a("#loanStatus").val()&&c(intDiff)}),a('form .btn-pay[type="submit"]').click(function(){var b=Number(a('form input[name="amount"]').val()),c=Number(a("form i.account-amount").text());return b>c?(location.href="/recharge",!1):!0}),a(".text-input-amount").blur(function(){var b=a(".hid-loan").val(),c=a(this).val(),d=Number(a(".amountNeedRaised-i").text());return d<parseFloat(c)?(a(".loan-detail-error-msg").html("<i class='loan-detail-error-msg-li'>x</i>输入金额不能大于可投金额!"),a(".loan-detail-error-msg").removeAttr("style"),void a(".btn-pay").attr("disabled","disabled").addClass("grey")):void a.ajax({url:"/calculate-expected-interest/loan/"+b+"/amount/"+c,type:"get",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(b){a(".loan-detail-error-msg").hide(),a(".expected-interest").html(b),a(".btn-pay").removeClass("grey").removeAttr("disabled")})})})});