require(["jquery","pagination","mustache","text!/tpl/loan-invest-list.mustache","layerWrapper","csrf","autoNumeric"],function(a,b,c,d,e){function f(b){window.setInterval(function(){var c=0,d=0,e=0,f=0;1800>=b&&(b>0?(e=Math.floor(b/60)-24*c*60-60*d,f=Math.floor(b)-24*c*60*60-60*d*60-60*e):(j.prop("disabled",!1),j.html("马上投资")),9>=e&&(e="0"+e),9>=f&&(f="0"+f),a("#minute_show").html("<s></s>"+e+"分"),a("#second_show").html("<s></s>"+f+"秒"),b--)},1e3)}var g=a(".loan-detail-content"),h=a(".text-input-amount",g),i=a(".account-info",g),j=a(".btn-pay",i),k=a(".loan-nav li"),l=a(".loan-list",g),m=(a("#picListBox"),a(".experience-ticket",g)),n=a(".pagination",g);h.autoNumeric("init"),e.ready(function(){e.photos({photos:"#picListBox"})});var o=function(b){var e={index:b||1};n.loadPagination(e,function(b){if(b.status){var e=c.render(d,b);a(".loan-list-con table").html(e)}})};if(java_point<=50?(a(".chart-box .rount").css("webkitTransform","rotate("+3.6*java_point+"deg)"),a(".chart-box .rount2").hide()):(a(".chart-box .rount").css("webkitTransform","rotate(180deg)"),a(".chart-box .rount2").show(),a(".chart-box .rount2").css("webkitTransform","rotate("+3.6*(java_point-50)+"deg)")),l.find(".loan-list-con").eq(0).show(),k.click(function(){var b=a(this);b.addClass("active").siblings("li").removeClass("active");var c=b.index();1===c&&o(),l.find(".loan-list-con").eq(c).show().siblings(".loan-list-con").hide()}),"PREHEAT"==a("#loanStatus").val()&&f(intDiff),j.click(function(){var b=parseFloat(a('form input[name="amount"]').val()),c=parseFloat(a("form .account-amount").text());return b>c?(location.href="/recharge",!1):!0}),h.length){m.is(":hidden")?a(".account-list").find("dd").last().css({"margin-top":"20px"}):m.find(":checkbox").on("click",function(){var b,c=a(this);b=c.is(":checked"),b?m.next("dd.experience-revenue").show():m.next("dd.experience-revenue").hide()});var p=function(){var b=a(".hid-loan").val(),c=h.val();""==c&&(c="0.00");var d=a("form .amountNeedRaised-i").text();if(Number(d)<Number(c)||0>=c){var f;return f=0>=c?"输入金额不能等于0!":"输入金额不能大于可投金额!",e.tips('<i class="fa fa-times-circle"></i>'+f,".text-input-amount",{tips:[1,"#ff7200"],time:0}),void j.prop("disabled",!0)}e.closeAll("tips"),j.prop("disabled",!1),a.ajax({url:"/calculate-expected-interest/loan/"+b+"/amount/"+c,type:"get",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(b){a(".expected-interest").html(b),j.prop("disabled",!1)})};p(),h.blur(p),a("form").submit(function(){var b=a(this);if("/invest"===b.attr("action")){if("undefined"==typeof user_can_invest)return location.href="/login?redirect="+encodeURIComponent(location.href),!1;var c=a("input[name='amount']",b).val();if(isNaN(parseFloat(c)))return!1}return!0})}window.onload=function(){var b=a(".errorTip");b.length&&e.confirm(b.text(),{icon:5,title:"温馨提示",btn:["重试"],skin:"layer-confirm-ui"})}});