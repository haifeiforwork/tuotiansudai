require(["jquery","mustache","text!/tpl/refer-table.mustache","text!/tpl/refer-invest-table.mustache","moment","pagination","layerWrapper","daterangepicker"],function(a,b,c,d,e,f,g){var h=a("#search-box"),i=a("#date-picker"),j=a("#loginName"),k=a("#referRelationPagination"),l=a("#referInvestPagination"),m=a(".btn-search",h),n=a(".btn-reset",h),o=a(".search-content-tab"),p=k,q=c;e().format("YYYY-MM-DD");i.dateRangePicker({separator:" ~ "}),a(".search-type .select-item").click(function(){a(this).addClass("current").siblings(".select-item").removeClass("current"),"referRelation"==a(this).data("type")?(k.show(),l.hide(),p=k,q=c):"referInvest"==a(this).data("type")&&(k.hide(),l.show(),p=l,q=d),r()});var r=function(c){var d=i.val().split("~"),e=a.trim(d[0])||"",f=a.trim(d[1])||"",h=a("#loginName").val(),j={startTime:e,endTime:f,loginName:h,index:c||1},k="";_.each(j,function(a,b){k+=b+"="+a+"&"}),p.loadPagination(j,function(c){a.ajax({url:"total-reward?"+k,type:"get",dataType:"json",contentType:"application/json; charset=UTF-8"}).success(function(a){c.totalReward=a;var d=b.render(q,c);o.empty().append(d)})}),a(".search-content-tab").on("mouseenter","span.loan-name-col",function(){g.closeAll("tips"),a(this).text().length>13&&g.tips(a(this).text(),a(this),{tips:[1,"#efbf5c"],time:2e3,tipsMore:!0,area:"auto",maxWidth:"500"})})};r(),m.click(function(){r()}),n.click(function(){i.val(""),j.val("")})});