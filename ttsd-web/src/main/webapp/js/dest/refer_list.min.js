require(["jquery","mustache","text!/tpl/refer-table.mustache","text!/tpl/refer-invest-table.mustache","moment","pagination","layer","daterangepicker"],function(a,b,c,d,e,f,g){var h=a("#date-picker"),i=a("#loginName"),j=a("#referRelationPagination"),k=a("#referInvestPagination"),l=j,m=c,n=e().format("YYYY-MM-DD");h.dateRangePicker({separator:" ~ "}).val(n+"~"+n),a(".search-type .select-item").click(function(){a(this).addClass("current").siblings(".select-item").removeClass("current"),"referRelation"==a(this).data("type")?(k.display="none",l=j,m=c):"referInvest"==a(this).data("type")&&(j.display="none",l=k,m=d),o()});var o=function(c){var d=h.val().split("~"),e=a.trim(d[0])||"",f=a.trim(d[1])||"",g=a("#loginName").val(),i={startTime:e,endTime:f,loginName:g,index:c||1},j="";_.each(i,function(a,b){j+=b+"="+a+"&"}),l.loadPagination(i,function(c){a.ajax({url:"totalReward?"+j,type:"get",dataType:"json",contentType:"application/json; charset=UTF-8"}).success(function(d){c.totalReward=d;var e=b.render(m,c);a(".refer-relation").html(e)})})};o(),a(".btn-normal").click(function(){o()}),a(".btn").click(function(){h.val(""),i.val("")})});