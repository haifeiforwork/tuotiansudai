require(["jquery","layerWrapper","jquery.validate","coupon-alert","red-envelope-float","jquery.ajax.extension"],function(a,b){function c(){a.ajax({url:"/transfer/apply",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({transferAmount:100*parseFloat(a("#transferAmount").val()),transferInvestId:a("#transferInvestId").val()}),beforeSend:function(a){d.find('button[type="submit"]').prop("disabled",!0)}}).done(function(c){1==c?b.open({title:"温馨提示",btn:0,area:["400px","150px"],content:a("#successTip").html(),success:function(b,c){setInterval(function(){a(".layui-layer-content .count-time").text()<2?window.location.href="/transferrer/transfer-application-list/TRANSFERRING":a(".layui-layer-content .count-time").text(function(a,b){return parseInt(b)-1})},1e3)}}):b.msg("申请失败，请重试！")}).fail(function(){b.msg("请求失败，请重试！")}).always(function(){d.find('button[type="submit"]').prop("disabled",!1)})}var d=a("#createForm"),e=d.find(".agreement");d.validate({debug:!0,rules:{price:{required:!0,max:parseFloat(a("#tipText").attr("data-max")),min:parseFloat(a("#tipText").attr("data-min"))}},onkeyup:function(){a("#tipText").removeClass("active")},errorPlacement:function(b,c){a("#tipText").addClass("active")},submitHandler:function(f){var g=d.find("i.fa").hasClass("fa-check-square");return g?void b.open({type:1,title:"温馨提示",btn:["确定","取消"],area:["330px","185px"],shadeClose:!0,content:'<p class="pad-m tc">是否确认转让？</p>',btn1:function(){var d=a("#transferInvestId").val();a.ajax({url:"/transfer/application/"+d+"/isAllowTransfer",type:"POST"}).done(function(a){1==a.status?(c(),b.closeAll()):b.msg(a.message)})},btn2:function(){b.closeAll()}}):void e.next("span.error").show()}}),e.on("click",function(){var b,c=a(this);c.toggleClass("checked"),c.hasClass("checked")?(b="fa fa-check-square",c.next("span.error").hide()):b="fa fa-square-o",c.find("i")[0].className=b}),a("#cancleBtn").on("click",function(a){a.preventDefault(),history.go(-1)})});