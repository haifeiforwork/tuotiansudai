require(["underscore","jquery","jquery.validate","jquery.validate.extension","jquery.form","jquery.ajax.extension","commonFun"],function(a,b){var c=b(".register-account-form"),d=b(".button-layer",c),e=b('input[type="submit"]',c);c.validate({focusCleanup:!0,focusInvalid:!1,onfocusout:function(a){this.element(a)},submitHandler:function(a){return b(a).ajaxSubmit({dataType:"json",beforeSubmit:function(a,b,c){d.find(".status").removeClass("error").html("认证中..."),e.prop("disabled",!0)},success:function(a){d.find(".status").html("认证成功");var b=commonFun.parseURL(location.href).params,c=b.redirect;setTimeout(location.href=c,3e3)},error:function(a){d.find(".status").addClass("error").html("认证失败，请检查")},complete:function(){}}),!1},onkeyup:function(a,c){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===c.which&&""===this.elementValue(a)||-1!==b.inArray(c.keyCode,d)||this.element(a)},rules:{userName:{required:!0},identityNumber:{required:!0,identityCheckValid:!0,identityCardAge:!0,isExist:"/register/account/identity-number/{0}/is-exist"}},messages:{userName:{required:"请输入姓名"},identityNumber:{required:"请输入身份证",identityCheckValid:"您的身份证号码不正确",identityCardAge:"年龄未满18周岁",isExist:"身份证已存在"}}})});