require(["jquery","layerWrapper","template","jquery.ajax.extension","nineLottery"],function(a,b,c){a(function(){var d=a("#signBtn"),e=a("#signLayer"),f=a("#closeSign"),g=a(".material-list li"),h=a(".point-rule-tip");d.on("click",function(d){d.preventDefault();var f=a(this),g=a(".sign-text"),h=a(".tomorrow-text"),i=a(".sign-point"),j=a(".intro-text"),k=a(".next-text"),l=a("#signBtn");a.ajax({url:f.attr("data-url"),type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(d){d.data.status?(1==d.data.signIn?g.html("您今天已签到"):g.html("签到成功"),h.html("明日签到可获得"+d.data.nextSignInPoint+"积分"),1==d.data.full?(j.html("已连续签到365天，获得全勤奖！"),k.html("365元现金红包")):(j.html(d.data.currentRewardDesc),k.html(d.data.nextRewardDesc)),l.addClass("no-click").html("已签到"),i.find("span").html("+"+d.data.signInPoint),e.fadeIn("fast")):(a("#errorTip").html(c("errorTipTpl",d.data)),b.open({type:1,title:!1,area:["300px","180px"],content:a("#errorTip")}))})}),f.on("click",function(a){a.preventDefault(),location.href="/point-shop"}),g.on("click",function(b){b.preventDefault(),location.href=a(this).attr("data-href")}).on("click",".get-btn",function(b){b.preventDefault(),!!a(this).hasClass("active")&&(location.href=a(this).parent("a").attr("href")),b.stopPropagation()}),h.on("click",function(c){c.preventDefault(),b.open({type:1,title:!1,closeBtn:0,area:["auto","520px"],scrollbar:!0,content:a("#ruleInfoTip")})}),a("#ruleInfoTip").on("click",".close-btn",function(a){a.preventDefault(),b.closeAll()})})});