require(["jquery","drawCircle","template","logintip","register_common"],function(a,b,c){var d=a("#lanternFrame"),e={};d.find(".tip-list-frame .tip-list").each(function(b,c){var d=a(c).data("return");e[d]=c}),function(b){var c=a(".reward-gift-box",d),f=a("#MobileNumber"),g="/activity/christmas/all-list",h="/activity/christmas/user-list",i="/activity/christmas/draw",j="/activity/christmas/drawTime",k=a(".pointer-img",c),l=f.length?f.data("mobile"):"",m={mobile:l,activityCategory:"CHRISTMAS_ACTIVITY"};b.prototype.showDrawTime=function(){a.ajax({url:j,type:"GET",dataType:"json"}).done(function(b){a(".draw-time",c).text(b)})};var b=new b(g,h,i,m,c,3);b.GiftRecord(3),b.MyGift(),b.showDrawTime(),k.on("click",function(){k.hasClass("win-result")||(k.addClass("win-result"),setTimeout(function(){b.beginLuckDraw(function(c){if(k.removeClass("win-result"),b.showDrawTime(),0==c.returnCode){var f=c.prizeType.toLowerCase();a(e[f]).find(".prizeValue").text(c.prizeValue),b.noRotateFn(e[f])}else 1==c.returnCode?b.tipWindowPop(e.nochance):2==c.returnCode?a(".no-login-text",d).trigger("click"):3==c.returnCode?b.tipWindowPop(e.expired):4==c.returnCode&&b.tipWindowPop(e.authentication)})},1500))});var n=c.find(".menu-switch span");n.on("click",function(){var b=a(this),d=b.index(),e=c.find(".record-list ul");b.addClass("active").siblings().removeClass("active"),e.eq(d).show().siblings("ul").hide()})}(b),a(window).width()<700&&a(".bg-two .wp",d).append(a(".bg-two .rule-model",d))});