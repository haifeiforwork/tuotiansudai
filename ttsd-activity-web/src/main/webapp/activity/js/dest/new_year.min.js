require(["jquery","drawCircle","logintip","register_common"],function(a,b){a(function(){var c=globalFun.browserRedirect(),d=a("#newYearDayFrame"),e=a("#newYearSlide"),f=a("#loginIn");!function(){f.on("click",function(){a(".no-login-text",d).trigger("click")})}(),function(){var b,c=a(".slide-text",d),e=c.find("li").eq(0).height();c.hover(function(){clearInterval(b)},function(){b=setInterval(function(){var a=c.find(".slide-text-list");a.animate({"margin-top":-e+"px"},2e3,function(){a.css({"margin-top":"0px"}).find("li:first").appendTo(a)})},500)}).trigger("mouseout")}(),function(){if("pc"==c){var a='<div class="body-decorate" id="bodyDecorate"> <div class="bg-left"></div> <div class="bg-right"></div> </div>';d.prepend(a),e.addClass("pc-img")}else{e.html("<img src="+staticServer+"/activity/images/christmas-day/app-top.jpg>");var b=globalFun.parseURL(location.href);"yes"==b.params.tag&&d.find(".reg-tag-current").show()}}(),function(b){var c=a(".reward-gift-box",d),e=a("#rewardTaskStatus"),f=a(".reward-list-frame",d),g=a("#MobileNumber"),h="/activity/point-draw/all-list",i="/activity/point-draw/user-list",j="/activity/point-draw/task-draw",k=a(".gold-egg",c),l=g.length?g.data("mobile"):"",m=c.find(".my-times").data("times"),n={info:"",button:"",area:[]},o={mobile:l,activityCategory:"ANNUAL_ACTIVITY"};f.find(".reward-box").each(function(b,c){var d=e.val().split(",");1==d[b]&&a(c).addClass("finished")}),b.prototype.signToday=function(b,c){var d=a("#signToday");d.on("click",function(){a.ajax({url:"/point/sign-in",type:"POST",dataType:"json"}).done(function(a){b&&b(a),location.reload()}).fail(function(){c&&c()})})};var b=new b(h,i,j,o,c);b.signToday(function(){n.button='<a href="javascript:void(0)" class="go-on go-close">知道了</a>',n.info='<p class="success-text">签到成功！</p><p class="des-text">恭喜您获得砸金蛋机会一次</p>',b.tipWindowPop(n)},function(){n.button="",n.info='<p class="login-text">请与客服联系</p>',b.tipWindowPop(n)}),b.GiftRecord(),b.MyGift(),k.on("click",function(){k.hasClass("win-result")||(k.addClass("win-result"),setTimeout(function(){b.beginLuckDraw(function(e){k.removeClass("win-result"),0==e.returnCode?("CONCRETE"==e.prizeType?(n.button='<a href="javascript:void(0)" class="go-on go-close">继续抽奖</a>',n.info='<p class="success-text">恭喜您！</p><p class="reward-text">抽中了'+e.prizeValue+'！</p><p class="des-text">拓天客服将会在7个工作日内联系您发放奖品</p>'):"VIRTUAL"==e.prizeType&&(n.button='<a href="/my-treasure" class="double-btn">去查看</a><a href="javascript:void(0)" class="go-on go-close">继续抽奖</a>',n.info='<p class="success-text">恭喜您！</p><p class="reward-text">'+e.prizeValue+'！</p><p class="des-text">奖品已发放至“我的宝藏”当中。</p>'),b.noRotateFn(n),c.find(".my-times").text(--m)):1==e.returnCode?(n.info='<p class="login-text">您暂无抽奖机会啦～</p><p class="des-text">赢取机会后再来抽奖吧！</p>',n.button='<a href="javascript:void(0)" class="go-close">知道了</a>',b.tipWindowPop(n)):2==e.returnCode?a(".no-login-text",d).trigger("click"):3==e.returnCode?(n.info='<p class="login-text">不在活动时间内~</p>',b.tipWindowPop(n)):4==e.returnCode&&(n.info='<p class="login-text">您还未实名认证~</p><p class="des-text">请实名认证后再来抽奖吧！</p>',n.button='<a href="javascript:void(0)" class="go-close">知道了</a>',b.tipWindowPop(n))})},1500))}),b.PrizeSwitch()}(b)})});