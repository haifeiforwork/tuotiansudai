require(["jquery","layerWrapper","template","logintip","jquery.ajax.extension"],function(a,b,c){a(function(){function d(d,e){a.ajax({url:"/activity/newman-tyrant/"+d+"/"+e,type:"GET",dataType:"json"}).done(function(b){b.status&&a("#rankTable").html(c("rankTableTpl",b))}).fail(function(){b.msg("请求失败，请重试！")})}function e(a,b){var c=new Date(a);c.setDate(c.getDate()+b);var d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate();return d+"-"+(e<10?"0"+e:e)+"-"+(f<10?"0"+f:f)}var f=a("#newmanTyrant"),g=a(".board-tab span",f),h=a("#infoDate"),i=a.trim(h.attr("data-date")).replace(/-/gi,""),j=a(".board-btn span",f),k=a("#heroNext"),l=a("#heroPre");20170420==i?(l.hide(),k.hide()):20170509==i?k.hide():i>20170420&&i<20170509?(l.show(),k.hide()):i>20170509?(l.show(),k.hide()):(l.hide(),k.hide()),g.on("click",function(b){b.preventDefault();var c=a(this),e=c.attr("data-type"),f=a.trim(h.text());c.addClass("active").siblings().removeClass("active"),d(e,f)}),j.on("click",function(b){var c,f=a.trim(h.text());/heroPre/.test(b.target.id)?c=e(f,-1):/heroNext/.test(b.target.id)&&(c=e(f,1)),20170420==c.replace(/-/gi,"")?(l.hide(),k.show()):c.replace(/-/gi,"")==i&&c.replace(/-/gi,"")>20170420?(l.show(),k.hide()):20170509==c.replace(/-/gi,"")&&c.replace(/-/gi,"")==i?(l.show(),k.hide()):c.replace(/-/gi,"")>20170420&&c.replace(/-/gi,"")<i&&(l.show(),k.show()),h.text(c),d(a(".board-tab span.active").attr("data-type"),a.trim(h.text()))}),a("body").on("click",".close-tip",function(a){a.preventDefault(),b.closeAll()}),d("tyrant",a.trim(h.text()))})});