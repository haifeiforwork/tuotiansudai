require(["jquery","underscore","layerWrapper","commonFun","superslide","placeholder","jquery.validate","jquery.validate.extension","jquery.form","jquery.ajax.extension"],function(a,b,c,d){!function(){var b=a("#landingContainerBox"),e=a(".register-user-form",b),f=a("#mobile"),g=a(".fetch-captcha"),h=a(".img-change"),i=a(".registered span"),j=a("#appCaptcha"),k=a(".web-page-register"),l=a(".mobile-page-register"),m=a(".landing-top"),n=a("#popWinBox"),o=globalFun.browserRedirect();"mobile"==o&&(k.empty(),l.empty().append(m));var p=globalFun.parseURL(location.href),q=p.params.referrer;if(q){var r=d.uncompile(q);a('input[name="referrer"]',b).val(r),a.ajax({url:"/activity/get-realRealName?mobile="+r,type:"GET",dataType:"json"}).done(function(c){String.prototype.replaceFirst=function(a){var b=this.length,c=this.substring(1,b);return a+c};var d=c.replaceFirst("*");a(".refer-name",b).text(d)})}else a(".refer-person-info",b).hide();if(a('input[type="text"],input[type="password"]',e).placeholder(),e.validate({focusInvalid:!1,errorPlacement:function(b,c){b.appendTo(a("#"+c.attr("id")+"Err"))},rules:{mobile:{required:!0,digits:!0,isPhone:!0,minlength:11,maxlength:11,isExist:"/register/user/mobile/{0}/is-exist"},password:{required:!0,regex:/^(?=.*[^\d])(.{6,20})$/},appCaptcha:{required:!0},captcha:{required:!0,digits:!0,maxlength:6,minlength:6,captchaVerify:{param:function(){var b=a("#mobile").val();return"/register/user/mobile/"+b+"/captcha/{0}/verify"}}},agreement:{required:!0}},messages:{mobile:{required:"请输入手机号",digits:"必须是数字",minlength:"手机格式不正确",isPhone:"请输入正确的手机号码",maxlength:"手机格式不正确",isExist:"手机号已存在"},password:{required:"请输入密码",regex:"6位至20位，不能全是数字"},appCaptcha:{required:"请输入验证码"},captcha:{required:"请输入手机验证码",digits:"验证码格式不正确",maxlength:"验证码格式不正确",minlength:"验证码格式不正确",captchaVerify:"验证码不正确"},agreement:{required:"请同意服务协议"}},submitHandler:function(a){a.submit()}}),n.length){var s=n.data("show-coupon-alert"),t=a(window).width(),u=815*t/750;t>700&&(a(".landing-container-app").css({"padding-top":.5*u}),a(".landing-container-game").css({"padding-top":.6*u}),a(".landing-container-bus").css({"padding-top":.6*u}),a(".landing-container-tour").css({"padding-top":.6*u})),s&&c.open({type:1,title:!1,closeBtn:0,area:"80%",skin:"layui-layer-nobg",shadeClose:!1,content:n}),n.find(".app-close").on("click",function(){c.closeAll()}),n.find(".app-button").on("click",function(){cnzzPush.trackClick("154landingPage2","领取588红包"),c.closeAll(),location.href="/loan-list"})}var v=function(){a(".image-captcha img").each(function(b,c){a(this).attr("src","/register/user/image-captcha?"+(new Date).getTime().toString())})};v(),a("#appCaptcha").on("focusout",function(b){b.preventDefault(),""!=f.val()&&/0?(13|14|15|18)[0-9]{9}/.test(f.val())&&""!=a("#appCaptcha").val()?g.prop("disabled",!1):g.prop("disabled",!0)}),j.on("focus",function(b){a("#appCaptchaErr").html("")}),h.on("click",function(a){a.preventDefault(),v()}),a(".show-agreement").on("click",function(b){b.preventDefault();var d=["950px","600px"];"mobile"==o&&(d=["100%","100%"]),c.open({type:1,title:"拓天速贷服务协议",area:d,shadeClose:!0,move:!1,scrollbar:!0,skin:"register-skin",content:a("#agreementBox")})}),a("#agreementBox").find(".close-tip").on("click",function(){c.closeAll()}),g.on("click",function(b){b.preventDefault();var d=a("#appCaptcha").val(),e=f.val();a.ajax({url:"/register/user/send-register-captcha",type:"POST",dataType:"json",data:{imageCaptcha:d,mobile:e}}).done(function(b){var c=60;return b.data.status&&!b.data.isRestricted?void(timer=setInterval(function(){g.prop("disabled",!0).text(c+"秒后重发"),c--,0==c&&(clearInterval(timer),c=60,g.prop("disabled",!1).text("重新发送"))},1e3)):(!b.data.status&&b.data.isRestricted&&a("#appCaptchaErr").html("短信发送频繁,请稍后再试"),b.data.status||b.data.isRestricted||a("#appCaptchaErr").html("图形验证码错误"),void v())}).fail(function(){v(),c.msg("请求失败，请重试！")})}),jQuery.validator.addMethod("isPhone",function(a,b){var c=/0?(13|14|15|18)[0-9]{9}/;return this.optional(b)||c.test(a)},"请正确填写您的手机号码"),i.on("click",function(b){b.preventDefault(),a("body,html").animate({scrollTop:0},"fast")}),a("#slideBox").slide({mainCell:".bd ul",effect:"left",trigger:"click"})}()});