require(["jquery","drawCircle","logintip","register_common"],function(a,b){var c=globalFun.browserRedirect(),d=a("#christmasDayFrame"),e=d.prev(),f={};d.find(".tip-list-frame .tip-list").each(function(b,c){var d=a(c).data("return");f[d]=c}),function(){if("pc"==c){d.prepend('<div class="body-decorate" id="bodyDecorate"> <div class="bg-left"></div> <div class="bg-right"></div> <div class="bg-bottom"></div> </div>'),e.addClass("pc-img")}else if("mobile"==c){e.html("<img src="+staticServer+"/activity/images/christmas-day/app-top.jpg>");var a=globalFun.parseURL(location.href);"yes"==a.params.tag&&d.find(".reg-tag-current").show()}}(),function(b){var c=a(".reward-gift-box",d),e=a("#MobileNumber"),g="/activity/christmas/all-list",h="/activity/christmas/user-list",i="/activity/christmas/draw",j=a(".pointer-img",c),k=e.length?e.data("mobile"):"",l={mobile:k,activityCategory:"CHRISTMAS_ACTIVITY"};b.prototype.showDrawTime=function(){a.ajax({url:"/activity/christmas/drawTime",type:"GET",dataType:"json"}).done(function(b){a(".draw-time",c).text(b)})};var b=new b(g,h,i,l,c);b.GiftRecord(),b.MyGift(),b.showDrawTime(),j.on("click",function(){j.hasClass("win-result")||(j.addClass("win-result"),setTimeout(function(){b.beginLuckDraw(function(c){if(j.removeClass("win-result"),b.showDrawTime(),0==c.returnCode){var e=c.prizeType.toLowerCase();a(f[e]).find(".prizeValue").text(c.prizeValue),b.noRotateFn(f[e])}else 1==c.returnCode?b.tipWindowPop(f.nochance):2==c.returnCode?a(".no-login-text",d).trigger("click"):3==c.returnCode?b.tipWindowPop(f.expired):4==c.returnCode&&b.tipWindowPop(f.authentication)})},1500))}),c.find(".menu-switch").find("span").on("click",function(){var b=a(this),d=b.index(),e=c.find(".record-list ul");b.addClass("active").siblings().removeClass("active"),e.eq(d).show().siblings().hide()})}(b)});