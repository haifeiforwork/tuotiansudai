require(["jquery","drawCircle","commonFun","logintip","register_common"],function(a,b){var c=globalFun.browserRedirect(),d=a("#christmasDayFrame"),e=d.prev();!function(){if("pc"==c){var a='<div class="body-decorate" id="bodyDecorate"> <div class="bg-left"></div> <div class="bg-right"></div> <div class="bg-bottom"></div> </div>';d.prepend(a),e.addClass("pc-img")}else if("mobile"==c){e.html("<img src="+staticServer+"/activity/images/christmas-day/app-top.jpg>");var b=commonFun.parseURL(location.href);"yes"==b.params.tag&&d.find(".reg-tag-current").show()}}(),function(b){var c=a(".reward-gift-box",d),e=a("#MobileNumber"),f="/activity/christmas/all-list",g="/activity/christmas/user-list",h="/activity/christmas/draw",i="/activity/christmas/drawTime",j=a(".pointer-img",c),k=e.length?e.data("mobile"):"",l={info:"",button:"",area:[]},m={mobile:k,activityCategory:"CHRISTMAS_ACTIVITY"};b.prototype.showDrawTime=function(){a.ajax({url:i,type:"GET",dataType:"json"}).done(function(b){a(".draw-time",c).text(b)})};var b=new b(f,g,h,m,c);b.GiftRecord(),b.MyGift(),b.showDrawTime(),j.on("click",function(){j.addClass("win-result"),setTimeout(function(){b.beginLuckDraw(function(c){j.removeClass("win-result"),b.showDrawTime(),0==c.returnCode?("CONCRETE"==c.prizeType?(l.button='<a href="javascript:void(0)" class="go-on go-close">继续抽奖</a>',l.info='<p class="success-text">恭喜您！</p><p class="reward-text">抽中了'+c.prizeValue+'！</p><p class="des-text">拓天客服将会在7个工作日内联系您发放奖品</p>'):"VIRTUAL"==c.prizeType&&(l.button='<a href="javascript:void(0)" class="go-on go-close">继续抽奖</a>',l.info='<p class="success-text">恭喜您！</p><p class="reward-text">'+c.prizeValue+'！</p><p class="des-text">奖品已发放至“我的宝藏”当中。</p>'),b.noRotateFn(l)):1==c.returnCode?(l.info='<p class="login-text">您暂无抽奖机会啦～</p><p class="des-text">赢取机会后再来抽奖吧！</p>',l.button='<a href="javascript:void(0)" class="go-close">知道了</a>',b.tipWindowPop(l)):2==c.returnCode?a(".no-login-text",d).trigger("click"):3==c.returnCode?(l.info='<p class="login-text">不在活动时间内~</p>',b.tipWindowPop(l)):4==c.returnCode&&(l.info='<p class="login-text">您还未实名认证~</p><p class="des-text">请实名认证后再来抽奖吧！</p>',l.button='<a href="javascript:void(0)" class="go-close">知道了</a>',b.tipWindowPop(l))})},1500)});var n=c.find(".menu-switch").find("span");n.on("click",function(){var b=a(this),d=b.index(),e=c.find(".record-list ul");b.addClass("active").siblings().removeClass("active"),e.eq(d).show().siblings().hide()})}(b)});