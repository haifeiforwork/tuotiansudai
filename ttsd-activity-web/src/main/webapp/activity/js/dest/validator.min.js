define(["jquery","commonFun"],function(a,b){function c(a,b){this.cache=[],this.checkOption={},this.newStrategy=function(a,b){d[a]=function(a){b&&b(a)}},this.add=function(a,b){var c=this;c.checkOption[a.name]=[];for(var e,f=0;e=b[f++];)c.checkOption[a.name].push(e);c.cache.push(function(a){for(var b,e=a.name,f=c.checkOption[e],g=f.length,h=0;h<g;h++){var i=f[h].strategy.split(":").shift(),j=f[h].errorMsg,k=[];k.push(j);var l=f[h].strategy.split(":")[1];if(l&&k.push(l),b=d[i].apply(a,k))break}return b})},this.start=function(a){var b=this.cache[0],c=b(a);if(c)return c}}var d={isNonEmpty:function(a){return""===this.value?(globalFun.addClass(this,"error"),a):void globalFun.removeClass(this,"error")},minLength:function(a,b){return this.value.length<Number(b)?(globalFun.addClass(this,"error"),a):void globalFun.removeClass(this,"error")},maxLength:function(a,b){return this.value.length>Number(b)?(globalFun.addClass(this,"error"),a):void globalFun.removeClass(this,"error")},isNumber:function(a,b){if(b){var c=new RegExp("^\\d{"+b+"}$","g");if(!c.test(this.value))return globalFun.addClass(this,"error"),a;globalFun.removeClass(this,"error")}},isChinese:function(a){return/^[\u4E00-\u9FA5]+$/.test(this.value)?void globalFun.removeClass(this,"error"):(globalFun.addClass(this,"error"),a)},equalLength:function(a,b){return this.value.length!=Number(b)?(globalFun.addClass(this,"error"),a):void globalFun.removeClass(this,"error")},checkPassword:function(a){var b=/^(?=.*[^\d])(.{6,20})$/.test(this.value);return b?void globalFun.removeClass(this,"error"):(globalFun.addClass(this,"error"),a)},isMobile:function(a){return/(^1[0-9]{10}$)/.test(this.value)?void globalFun.removeClass(this,"error"):(globalFun.addClass(this,"error"),a)},identityValid:function(a){var c=b.IdentityCodeValid(this.value);return c?void globalFun.removeClass(this,"error"):(globalFun.addClass(this,"error"),a)},ageValid:function(a){var c=b.IdentityCodeValid(this.value);if(c){var d=b.checkedAge(this.value);if(!d)return globalFun.addClass(this,"error"),a;globalFun.removeClass(this,"error")}},isCardExist:function(a){var c="",d=this;if(18==this.value.length)return b.useAjax({type:"GET",async:!1,url:"/authentication/identityNumber/"+this.value+"/is-exist"},function(b){b.data.status?(c=a,globalFun.addClass(d,"error")):(c="",globalFun.removeClass(d,"error"))}),c},isMobileExist:function(a){var c="",d=this;return b.useAjax({type:"GET",async:!1,url:"/register/user/mobile/"+this.value+"/is-exist"},function(b){b.data.status?(c=a,globalFun.addClass(d,"error")):(c="",globalFun.removeClass(d,"error"))}),c}};return c});