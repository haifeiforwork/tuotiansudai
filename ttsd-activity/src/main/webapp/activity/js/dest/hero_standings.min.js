require(["jquery","underscore","layerWrapper","template","logintip","jquery.ajax.extension","commonFun","register_common"],function(a,b,c,d){a(function(){function d(a,b){var c=new Date(a);c.setDate(c.getDate()+b);var d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate();return d+"-"+(e<10?"0"+e:e)+"-"+(f<10?"0"+f:f)}function e(d){a.ajax({url:"/activity/hero-ranking/invest/"+d,type:"GET",dataType:"json"}).done(function(c){if(c.status){var d=a(".table-list-item"),e=a("#investRanking-tbody").parents("table");if(b.isNull(c.records)||0==c.records.length)return d.html('<span class="date-over">活动已结束</span>'),e.hide(),void a("#bgItem").hide();e.show(),a("#bgItem").show(),c.type="invest",a("#investRanking-tbody").html(m(c)),a("#bgItem").html(m(c))}}).fail(function(){c.msg("请求失败，请重试！")})}var f=commonFun.browserRedirect(),g=a("#TodayAwards"),h=a("#investRanking-button"),i=a("#heroNext"),j=a("#heroPre"),k=a.trim(g.val()),l=a("#tplTable").html(),m=b.template(l),n=a("#bgtplTable").html();b.template(n);if("mobile"==f){var o=commonFun.parseURL(location.href);"yes"==o.params.tag&&a(".reg-tag-current").show()}k.replace(/-/gi,"")>=20160927&&i.hide(),h.find(".button-small").on("click",function(a){var b,c=g.val();/heroPre/.test(a.target.id)?b=d(c,-1):/heroNext/.test(a.target.id)&&(b=d(c,1)),b.replace(/-/gi,"")>=20160927?i.hide():i.show(),b.replace(/-/gi,"")<=20161021?j.hide():j.show(),e(b)}),e("2016-09-27")})});