require(["jquery","underscore","layerWrapper","template","logintip","jquery.ajax.extension","commonFun","register_common"],function(a,b,c,d){a(function(){function d(a,b){var c=new Date(a);c.setDate(c.getDate()+b);var d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate();return d+"-"+(e<10?"0"+e:e)+"-"+(f<10?"0"+f:f)}function e(b){a.ajax({url:"/activity/hero-ranking/invest/"+b+"?activityCategory=NEW_HERO_RANKING",type:"GET",dataType:"json"}).done(function(b){b.status&&(b.type="invest",a("#investRanking-tbody").html(k(b)),a("#bgItem").html(m(b)))}).fail(function(){c.msg("请求失败，请重试！")})}var f=commonFun.browserRedirect(),g=a("#TodayAwards"),h=a("#investRanking-button"),i=(a("#heroNext"),a("#heroPre"),a.trim(g.val())),j=a("#tplTable").html(),k=b.template(j),l=a("#bgtplTable").html(),m=b.template(l);if("mobile"==f){var n=commonFun.parseURL(location.href);"yes"==n.params.tag&&a(".reg-tag-current").show()}h.find(".change-btn").on("click",function(b){var c,f=g.val();/heroPre/.test(b.target.id)?c=d(f,-1):/heroNext/.test(b.target.id)&&(c=d(f,1)),(c.replace(/-/gi,"")>=a("#startTime").val()||c.replace(/-/gi,"")<=a("#endTime").val())&&e(c),g.val(c)}),e(i)})});