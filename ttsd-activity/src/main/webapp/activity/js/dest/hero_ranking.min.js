require(["jquery","underscore","layerWrapper","template","jquery.ajax.extension"],function(a,b,c,d){a(function(){function e(d){a.ajax({url:"/activity/hero-ranking/invest/"+d,type:"GET",dataType:"json"}).done(function(c){var c={status:!0,message:null,records:[{loginName:"hey******",sumAmount:2289444,userName:"赫媛媛",mobile:"18600749459",centSumAmount:"22894.44"},{loginName:"yan******",sumAmount:2e6,userName:"冯华容",mobile:"13932711604",centSumAmount:"20000.00"},{loginName:"lin******",sumAmount:1628327,userName:"王美娟",mobile:"15998504411",centSumAmount:"16283.27"},{loginName:"che******",sumAmount:23e4,userName:"陈放",mobile:"18903240495",centSumAmount:"2300.00"},{loginName:"lia******",sumAmount:2e5,userName:"梁晔",mobile:"13651133128",centSumAmount:"2000.00"},{loginName:"lia******",sumAmount:1e5,userName:"梁金花",mobile:"13522923770",centSumAmount:"1000.00"},{loginName:"wad******",sumAmount:6e4,userName:"吴冬",mobile:"13911552934",centSumAmount:"600.00"},{loginName:"gai******",sumAmount:52663,userName:"盖薇",mobile:"13731441374",centSumAmount:"526.63"},{loginName:"wux******",sumAmount:5e4,userName:"王英霄",mobile:"15890187610",centSumAmount:"500.00"},{loginName:"dou******",sumAmount:5e4,userName:"马豆",mobile:"15137180297",centSumAmount:"500.00"}]};if(c.status){if(b.isNull(c.records)||0==c.records.length)return void a(".nodata-invest").show();a("#investRanking-tbody").parents("table").show(),a("#investRanking-tbody").html(o(c))}}).fail(function(){c.msg("请求失败，请重试！")})}function f(d){a.ajax({url:"/activity/hero-ranking/referrer-invest/"+d,type:"GET",dataType:"json"}).done(function(c){var c={status:!0,message:null,records:[{loginName:"tts******",sumAmount:2289444,userName:"刘守艳",mobile:"13901255493",centSumAmount:"22894.44"},{loginName:"278******",sumAmount:2e6,userName:"冯华梅",mobile:"13623271373",centSumAmount:"20000.00"},{loginName:"aul******",sumAmount:3e5,userName:"梁海燕",mobile:"15910636139",centSumAmount:"3000.00"}]};if(c.status){if(b.isNull(c.records)||0==c.records.length)return void a(".nodata-refer").show();a("#referRanking-tbody").parents("table").show(),a("#referRanking-tbody").html(o(c))}}).fail(function(){c.msg("请求失败，请重试！")})}var g=a("#getVip"),h=a(".get-rank"),i=a("#TodayAwards"),j=a("#ReferRankingDate"),k=a("#investRanking-button"),l=a("#referRanking-button"),m=a.trim(i.text()),n=a("#tplTable").html(),o=b.template(n);k.find(".button-small").on("click",function(a){var b,c=i.text().split("-"),d=c[0],f=c[1],g=c[2];/heroPre/.test(a.target.id)?g=g-0-1:/heroNext/.test(a.target.id)&&(g=g-0+1),g>0&&g<=31&&(b=d+"-"+f+"-"+g,i.text(b),e(b))}),l.find(".button-small").on("click",function(a){var b,c=j.text().split("-"),d=c[0],e=c[1],g=c[2];/referPre/.test(a.target.id)?g=g-0-1:/referNext/.test(a.target.id)&&(g=g-0+1),g>0&&g<=31&&(b=d+"-"+e+"-"+g,j.text(b),f(b))}),g.on("click",function(b){b.preventDefault(),a.ajax({url:"/membership/receive",type:"GET",dataType:"json"}).done(function(b){console.log(b),a("#vipTipModel").html(d("vipTipModelTpl",b)),c.open({type:1,move:!1,area:["320px","auto"],title:"领取须知",content:a("#vipTipModel")})}).fail(function(){c.msg("请求失败，请重试！")})}),a("body").on("click","#closeTip",function(a){a.preventDefault(),c.closeAll()}),e(m),f(m),h.on("click",function(){cnzzPush.trackClick("153周年庆","我要上榜","英雄榜")}),g.on("click",function(){cnzzPush.trackClick("152周年庆","领取会员","英雄榜")})})});