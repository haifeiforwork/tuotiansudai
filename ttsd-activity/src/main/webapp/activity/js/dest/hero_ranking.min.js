require(["jquery","underscore","layerWrapper","template","jquery.ajax.extension"],function(a,b,c,d){a(function(){function d(d){a.ajax({url:"/activity/hero-ranking/invest/"+d,type:"GET",dataType:"json"}).done(function(c){if(c.status){var c={status:!0,message:null,records:[{loginName:"158**32",sumAmount:6010023,userName:"王林",mobile:"15810802032",centSumAmount:"60100.23"},{loginName:"157**97",sumAmount:3e6,userName:"齐银河",mobile:"15720311797",centSumAmount:"30000.00"},{loginName:"139**10",sumAmount:2093113,userName:"刘桂清",mobile:"13932754010",centSumAmount:"20931.13"},{loginName:"137**81",sumAmount:2005e3,userName:"杨文萍",mobile:"13731738181",centSumAmount:"20050.00"},{loginName:"135**82",sumAmount:2e6,userName:"王淑颖",mobile:"13585010482",centSumAmount:"20000.00"},{loginName:"158**01",sumAmount:500492,userName:"李艳菊",mobile:"15810919401",centSumAmount:"5004.92"},{loginName:"189**89",sumAmount:429155,userName:"安桥芬",mobile:"18931772989",centSumAmount:"4291.55"},{loginName:"189**96",sumAmount:215e3,userName:"王会青",mobile:"18911343396",centSumAmount:"2150.00"},{loginName:"151**48",sumAmount:2e5,userName:"仲国苓",mobile:"15133898548",centSumAmount:"2000.00"},{loginName:"138**19",sumAmount:155e3,userName:"张晨",mobile:"13810668619",centSumAmount:"1550.00"}]},d=a(".nodata-invest"),e=a("#investRanking-tbody").parents("table");if(b.isNull(c.records)||0==c.records.length)return d.show(),void e.hide();e.show(),d.hide(),c.type="invest",a("#investRanking-tbody").html(n(c))}}).fail(function(){c.msg("请求失败，请重试！")})}function e(d){a.ajax({url:"/activity/hero-ranking/referrer-invest/"+d,type:"GET",dataType:"json"}).done(function(c){if(c.status){var d=a(".nodata-refer"),e=a("#referRanking-tbody").parents("table");if(b.isNull(c.records)||0==c.records.length)return d.show(),void e.hide();e.show(),d.hide(),c.type="referrer",a("#referRanking-tbody").html(n(c))}}).fail(function(){c.msg("请求失败，请重试！")})}var f=a("#getVip"),g=a(".get-rank"),h=a("#TodayAwards"),i=a("#ReferRankingDate"),j=a("#investRanking-button"),k=a("#referRanking-button"),l=a.trim(h.text()),m=a("#tplTable").html(),n=b.template(m);j.find(".button-small").on("click",function(a){var b,c=h.text().split("-"),e=c[0],f=c[1],g=c[2];/heroPre/.test(a.target.id)?g=g-0-1:/heroNext/.test(a.target.id)&&(g=g-0+1),g>0&&g<=31&&(b=e+"-"+f+"-"+g,h.text(b),d(b))}),k.find(".button-small").on("click",function(a){var b,c=i.text().split("-"),d=c[0],f=c[1],g=c[2];/referPre/.test(a.target.id)?g=g-0-1:/referNext/.test(a.target.id)&&(g=g-0+1),g>0&&g<=31&&(b=d+"-"+f+"-"+g,i.text(b),e(b))}),f.on("click",function(d){d.preventDefault(),a.ajax({url:"/membership/receive",type:"GET",dataType:"json"}).done(function(d){var e=a("#vipTipModelTpl").html(),f=b.template(e);a("#vipTipModel").html(f(d)),c.open({type:1,move:!1,area:["320px","auto"],title:"领取须知",content:a("#vipTipModel")})}).fail(function(){c.msg("请求失败，请重试！")})}),a("body").on("click","#closeTip",function(a){a.preventDefault(),c.closeAll()}),d(l),e(l),g.on("click",function(){cnzzPush.trackClick("153周年庆","我要上榜","英雄榜")}),f.on("click",function(){cnzzPush.trackClick("152周年庆","领取会员","英雄榜")})})});