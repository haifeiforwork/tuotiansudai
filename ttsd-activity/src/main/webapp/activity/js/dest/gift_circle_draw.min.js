define(["jquery","rotate","layerWrapper","template"],function(a,b,c,d){function e(b,d,e,f){this.bRotate=!1,this.allListURL=b,this.userListURL=d,this.drawURL=e,this.paramData=f,this.beginLotteryDraw=function(b){this.bRotate||a.ajax({url:this.drawURL,data:this.paramData,type:"POST",dataType:"json"}).done(function(a){b(a)}).fail(function(){c.msg("请求失败")})},this.GiftRecord=function(){a.ajax({url:this.allListURL,data:this.paramData,type:"GET",dataType:"json"}).done(function(a){})},this.MyGift=function(){a.ajax({url:this.userListURL,data:this.paramData,type:"GET",dataType:"json"}).done(function(a){})}}var f=a(".gift-circle-frame");a(".text-tip",f),a(".btn-list",f);return e.prototype.rotateFn=function(b,c,d){this.bRotate=!this.bRotate,a(".rotate-btn",f).stopRotate(),a(".rotate-btn",f).rotate({angle:0,animateTo:b+1800,duration:8e3,callback:function(){this.tipWindowPop(c,d),this.bRotate=!this.bRotate,this.GiftRecord(),this.MyGift()}})},e.prototype.scrollList=function(a){var b=a,c=b.find("li:first").height();b.find("li").length>10&&b.animate({"margin-top":-c+"px"},600,function(){b.css({"margin-top":"0px"}).find("li:first").appendTo(b)})},e.prototype.tipWindowPop=function(a,b){b.find(".text-tip").empty().html(a.info),b.find(".btn-list").empty().html(a.button),0==a.area.length&&(a.area=["460px","370px"]),c.open({type:1,title:!1,area:a.area,shade:.8,closeBtn:0,shadeClose:!0,content:b})},e.prototype.PrizeSwitch=function(b,c){b.on("click",function(b){var d=a(this),b=d.index();c.eq(b).show().siblings().hide()})},e});