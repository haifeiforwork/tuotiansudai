require(["jquery","layerWrapper","template","jquery.ajax.extension","nineLottery"],function(a,b,c){a(function(){var d=a("#pointContainer"),e=a("#signBtn"),f=a("#signLayer"),g=a("#closeSign"),h=a(".material-list li",d),i=a(".point-rule-tip");e.on("click",function(d){d.preventDefault();var e=a(this),g=a(".sign-text"),h=a(".tomorrow-text"),i=a(".sign-point"),j=a(".intro-text"),k=a(".next-text"),l=a("#signBtn");a.ajax({url:e.attr("data-url"),type:"POST",dataType:"json"}).done(function(d){if(d.data.status){var e=d.data.signIn?"您今天已签到":"签到成功";g.html(e),h.html("明日签到可获得"+d.data.nextSignInPoint+"积分"),d.data.full?(j.html("已连续签到365天，获得全勤奖！"),k.html("365元现金红包")):(j.html(d.data.currentRewardDesc),k.html(d.data.nextRewardDesc)),l.addClass("no-click").html("已签到"),i.find("span").html("+"+d.data.signInPoint),f.fadeIn("fast")}else a("#errorTip").html(c("errorTipTpl",d.data)),b.open({type:1,title:!1,area:["300px","180px"],content:a("#errorTip")})})}),g.on("click",function(a){a.preventDefault(),location.href="/point-shop"}),h.on("click",function(b){b.stopPropagation();var c=b.target.className;/active/.test(c)||(location.href=a(this).data("href"))}),i.on("click",function(c){c.preventDefault(),b.open({type:1,title:!1,closeBtn:0,area:["auto","520px"],scrollbar:!0,content:a("#ruleInfoTip")})}),a("#ruleInfoTip").on("click",".close-btn",function(a){a.preventDefault(),b.closeAll()})})});