require(["jquery","layerWrapper","template","drawCircle","jquery.ajax.extension"],function(a,b,c,d){a(function(){var e=a("#signBtn"),f=a("#signLayer"),g=a("#closeSign"),h=a(".material-list li"),i=a(".point-rule-tip");e.on("click",function(d){d.preventDefault();var e=a(this),g=a(".sign-text"),h=a(".tomorrow-text"),i=a(".sign-point"),j=a(".intro-text"),k=a(".next-text"),l=a("#signBtn");a.ajax({url:e.attr("data-url"),type:"POST",dataType:"json",contentType:"application/json; charset=UTF-8"}).done(function(d){d.data.status?(1==d.data.signIn?g.html("您今天已签到"):g.html("签到成功"),h.html("明日签到可获得"+d.data.nextSignInPoint+"积分"),j.html(d.data.currentRewardDesc),k.html(d.data.nextRewardDesc),l.addClass("no-click").html("已签到"),i.find("span").html(d.data.signInPoint),f.fadeIn("fast")):(a("#errorTip").html(c("errorTipTpl",d.data)),b.open({type:1,title:!1,area:["300px","180px"],content:a("#errorTip")}))})}),g.on("click",function(a){a.preventDefault(),location.href="/point-shop"}),h.on("click",function(b){b.preventDefault(),location.href=a(this).attr("data-href")}).on("click",".get-btn",function(b){b.preventDefault(),!!a(this).hasClass("active")&&(location.href=a(this).parent("a").attr("href")),b.stopPropagation()}),i.on("click",function(c){c.preventDefault(),b.open({type:1,title:!1,closeBtn:0,area:["auto","520px"],scrollbar:!0,content:a("#ruleInfoTip")})}),a("#ruleInfoTip").on("click",".close-btn",function(a){a.preventDefault(),b.closeAll()}),function(b){var c=a("#pointContainer"),d={},e=a(".nine-lottery-group",c),f=a("#MobileNumber"),g="/point/point-draw/all-list",h="/point/point-draw/user-list",i="/point/point-draw/draw",j=a(".lottery-btn",e),k=f.length?f.data("mobile"):"";c.find(".tip-list-frame .tip-list").each(function(b,c){var e=a(c).data("return");d[e]=c});var l={mobile:k,activityCategory:"CARNIVAL_ACTIVITY"},b=new b(g,h,i,l,e);b.GiftRecord(),b.MyGift(),j.on("click",function(){b.beginLuckDraw(function(e){var f;if(0==e.returnCode){switch(e.prize){case"M1_PHONE":f=7;break;case"HUMIDIFIER":f=0;break;case"HAIR_DRIER":f=1;break;case"IQIYI_MEMBERSHIP_REF_CARNIVAL":f=5;break;case"TELEPHONE_FARE_10_REF_CARNIVAL":f=2;break;case"BAMBOO_CHARCOAL_PACKAGE":f=6;break;case"INTEREST_COUPON_5_POINT_DRAW_REF_CARNIVAL":f=3;break;case"RED_ENVELOPE_50_POINT_DRAW_REF_CARNIVAL":f=4}var g=e.prizeType.toLowerCase();a(d[g]).find(".prizeValue").text(e.prizeValue),b.lotteryRoll({elementId:"lotteryBox",speed:100,prize:f},d[g])}else 1==e.returnCode?b.tipWindowPop(d.nochance):2==e.returnCode?a(".no-login-text",c).trigger("click"):3==e.returnCode?b.tipWindowPop(d.expired):4==e.returnCode&&b.tipWindowPop(d.authentication)})});var m=e.find(".lottery-right-group").find("h3 span");m.on("click",function(){var b=a(this),c=b.index(),d=e.find(".record-item");b.addClass("active").siblings().removeClass("active"),d.eq(c).show().siblings().hide()})}(d)})});