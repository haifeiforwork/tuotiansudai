require(["jquery","layerWrapper","jquery.ajax.extension"],function(a,b){a(function(){var c=a("#pointDetail"),d=a(".count-list",c),e=d.find(".num-text"),f=parseInt(e.val()),g=a("#getBtn");d.on("click",function(a){var b=a.target,c=parseInt(d.data("overplus")),g=parseInt(d.data("mylimit"));f=parseInt(e.val());var h=0==g?c:Math.min(c,g);c<1||(/low-btn/.test(b.className)&&f>1?e.val(--f):/add-btn/.test(b.className)&&f<h&&e.val(++f))}),g.on("click",function(c){c.preventDefault();var d=a(this),f=d.attr("data-id"),g=d.attr("data-type");a.ajax({url:"/point-shop/hasEnoughGoods",type:"POST",dataType:"json",data:{id:f,goodsType:g,amount:e.val()}}).done(function(a){a.data.status?location.href="/point-shop/order/"+f+"/"+g+"/"+e.val():b.msg(a.data.message)}).fail(function(a){b.msg("请求失败，请重试！")})})})});